{% if tr.error %}
    <div class="text-danger">Function error</div>
{% elif not tr.result %}
    <div class="text-muted">No results found</div>
{% else %}
<div class="text-carousel mb-2 w-75" data-results-carousel style="--carousel-hpad: 3rem; --collapsed-max-height: 20rem;">
    <div class="carousel-content">
        {% for item in tr.result %}
        <div class="text-slide">
            <div id="slide-{{ item.node_id }}" class="slide-body">
                {{ item.html | safe }}
                <p class="text-muted small mt-2"><b>Source:</b> {{item.citation | safe }}</p>
            </div>
            <div class="expand-controls">
                <button type="button" class="btn btn-primary btn-sm read-more-btn" data-action="expand">Read more</button>
                <button type="button" class="btn btn-secondary btn-sm d-none" data-action="collapse">Hide</button>
            </div>
        </div>
        {% endfor %}
    </div>

    <button type="button" class="btn btn-outline-secondary carousel-nav prev" data-action="prev">&#8249;</button>
    <button type="button" class="btn btn-outline-secondary carousel-nav next" data-action="next">&#8250;</button>

    <div class="text-carousel-indicators">
        <span class="badge bg-secondary me-1" data-role="indicator"></span>
    </div>
</div>
{% endif %}